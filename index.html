*** Begin Patch
*** Update File: index.html
@@
-  <script>
+  <script type="module">
@@
-  // ---- Workflow ----
-  function startWorkflow(template, ctx) {
+  // ---- TYPE Router (minimal, lazy) ----
+  const ROUTES = {
+    // use relative paths so it works on GitHub Pages subpaths
+    default: './renderers/default.js',
+    // add more as you create them:
+    // candle: './renderers/candle.js',
+    // card: './renderers/card.js',
+  };
+
+  function pickType(tpl){
+    const t = (tpl?.TYPE ?? tpl?.type ?? tpl?.Type ?? '').toString().trim();
+    return t || 'default';
+  }
+
+  function buildFieldIndexFromTemplate(tpl){
+    const arr = Array.isArray(tpl?.fields) ? tpl.fields : [];
+    const byId = Object.create(null), byKey = Object.create(null), byLabel = Object.create(null);
+    for (const f of arr) {
+      if (!f) continue;
+      if (f.id) byId[f.id] = f;
+      if (f.key) byKey[f.key] = f;
+      if (f.label) byLabel[String(f.label).toLowerCase()] = f;
+    }
+    return { all: arr, byId, byKey, byLabel };
+  }
+
+  async function loadRendererByType(type){
+    const path = ROUTES[type] || ROUTES.default;
+    if (!path) return null;
+    try {
+      const mod = await import(path);
+      return mod?.default ?? mod;
+    } catch (e){
+      console.warn(`Renderer load failed for TYPE="${type}" -> ${path}. Using no-op.`, e);
+      return null;
+    }
+  }
+
+  // ---- Workflow ----
+  async function startWorkflow(template, ctx) {
     document.getElementById('templates')?.classList.add('hidden');
     document.getElementById('simPanel')?.classList.add('hidden');
 
     const wrap = document.getElementById('customiser');
     wrap.classList.remove('hidden');
@@
-    buildForm(template, ctx.prefill);
+    buildForm(template, ctx.prefill);
 
     // initial preview
     renderPreview(template, { ...ctx.prefill, template_id: template.template_id });
 
     // re-render on input changes
@@
       document.getElementById('c-done').textContent = 'All good â€” ready to generate!';
     };
     document.getElementById('c-cancel').onclick = () => {
       wrap.classList.add('hidden');
       document.getElementById('templates')?.classList.remove('hidden');
       document.getElementById('simPanel')?.classList.remove('hidden');
     };
+
+    // ---- TYPE routing (non-breaking) ----
+    const TYPE = pickType(template);
+    const fieldIndex = buildFieldIndexFromTemplate(template);
+    // expose for quick debugging / future modules
+    window.__APP__ = { type: TYPE, template, fieldIndex };
+
+    const renderer = await loadRendererByType(TYPE);
+    if (renderer && typeof renderer.init === 'function') {
+      // Pass a compact context; expand as needed later
+      renderer.init({
+        type: TYPE,
+        template,
+        layout: template.layout,
+        fields: template.fields,
+        fieldIndex,
+        // handy DOM refs
+        dom: {
+          form: document.getElementById('c-form'),
+          previewMount: document.getElementById('svgMount'),
+          errorsEl: document.getElementById('c-errors'),
+        },
+        // small util surface
+        utils: {
+          renderPreview,
+          safeUrl,
+          getVisibleFields,
+          isFieldRequired,
+          computeImageFit,
+        }
+      });
+    }
   }
@@
-    document.getElementById("simBtn").addEventListener("click", () => {
+    document.getElementById("simBtn").addEventListener("click", async () => {
       const templateId = document.getElementById("simTpl").value.trim();
       const name = document.getElementById("simName").value.trim();
       const orderId = document.getElementById("simOrder").value.trim();
       const photo = document.getElementById("simPhoto").value.trim();
 
       const tpl = records.find(t => (t.template_id||"").toLowerCase() === templateId.toLowerCase());
       if (!tpl) { alert("Template not found."); return; }
 
       const prefill = {};
       if (Array.isArray(tpl.fields)) {
         for (const f of tpl.fields) {
           if (f.type === 'text')  prefill[f.key] = name || "";
           if (f.type === 'image' && photo) prefill[f.key] = safeUrl(photo) || "";
         }
       }
-      startWorkflow(tpl, { orderId, prefill });
+      await startWorkflow(tpl, { orderId, prefill });
     });
 
     // Auto-start if params present
-    await bootFromJotform(records);
+    await bootFromJotform(records);
   })();
   </script>
*** End Patch
